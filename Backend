from flask import Flask, request, jsonify
import pandas as pd
import numpy as np

app = Flask(__name__)

@app.route('/status', methods=['GET'])
def health_check():
    return jsonify({"status": "Online", "message": "IBM Sprint 0 Backend is running"})

@app.route('/process', methods=['POST'])
def process_data():
    try:
        # Get JSON data from request
        input_data = request.get_json()
        df = pd.DataFrame(input_data)

        # Basic Data Science Logic
        summary = {
            "total_records": len(df),
            "average_value": float(df['value'].mean()) if 'value' in df else 0,
            "missing_values": int(df.isnull().sum().sum()),
            "status": "Success"
        }

        return jsonify(summary)
    except Exception as e:
        return jsonify({"error": str(e)}), 400

if __name__ == '__main__':
    # Use port 5000 as standard for Flask
    app.run(host='0.0.0.0', port=5000, debug=True)

